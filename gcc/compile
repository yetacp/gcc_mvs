#/bin/sh

rm gccmvs
rm *.o

FILES="
  alias
  attribs
  bb-reorder
  bitmap
  builtins
  c-aux-info
  c-common
  c-convert
  c-decl
  c-errors
  c-format
  c-lang
  c-lex
  c-objc-common
  c-parse
  c-pragma
  c-semantics
  c-typeck
  caller-save
  calls
  cfg
  cfganal
  cfgbuild
  cfgcleanup
  cfglayout
  cfgloop
  cfgrtl
  combine
  conflict
  convert
  cppdefault
  cpperror
  cppexp
  cppfiles
  cpphash
  cppinit
  cpplex
  cpplib
  cppmacro
  cppmain
  cppspec
  cse
  cselib
  debug
  dependence
  df
  diagnostic
  dominance
  dwarf2asm
  dwarf2out
  emit-rtl
  except
  explow
  expmed
  expr
  final
  flow
  fold-const
  function
  gcc
  gccspec
  gcse
  genrtl
  ggc-common
  ggc-page
  global
  graph
  hash
  hashtable
  hooks
  ifcvt
  insn-attrtab
  insn-emit
  insn-extract
  insn-opinit
  insn-output
  insn-recog
  integrate
  jump
  langhooks
  lcm
  line-map
  lists
  local-alloc
  loop
  mkdeps
  optabs
  params
  predict
  prefix
  print-rtl
  print-tree
  profile
  real
  recog
  regclass
  regmove
  regrename
  reload
  reload1
  resource
  rtl-error
  rtl
  rtlanal
  sbitmap
  sibcall
  simplify-rtx
  ssa-ccp
  ssa-dce
  ssa
  stmt
  stor-layout
  stringpool
  timevar
  toplev
  tree-dump
  tree-inline
  tree
  unroll
  varasm
  varray
  version
  ../libiberty/xmalloc
  ../libiberty/xstrerror
  ../libiberty/xstrdup
  ../libiberty/xexit
  ../libiberty/concat
  ../libiberty/hex
  ../libiberty/alloca
  ../libiberty/lbasename
  ../libiberty/obstack
  ../libiberty/strsignal
  ../libiberty/safe-ctype
  ../libiberty/splay-tree
  ../libiberty/fibheap
  ../libiberty/hashtab
  ../libiberty/asprintf
  ../libiberty/vasprintf
  ../libiberty/getpagesize
  ../libiberty/partition
  config/i370/i370-c
  config/i370/i370
  unixio
  "
for file in $FILES

do

echo "Compiling - $file"
gcc -nostdinc -O2 -c -ansi -pedantic-errors -DHAVE_CONFIG_H -DIN_GCC -DPUREISO $* -I ../../pdos/pdpclib -I . -I config/i370 -I ../include $file.c

done

gcc -nostdlib -o gccmvs *.o ../../pdos/pdpclib/pdplinux.a -lgcc

exit
